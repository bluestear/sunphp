(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b503936"],{"0792":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return s}));var i=a("61f7");function n(t,e,a){if(e){if(!Object(i["f"])(e)&&!Object(i["e"])(e))return a(new Error("号码填写不正确"));a()}else a()}function s(t,e,a){if(e){if(!Object(i["d"])(e))return a(new Error("数字填写不正确"));a()}else a()}},1525:function(t,e,a){"use strict";a("f157")},"2f21":function(t,e,a){"use strict";var i=a("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"333d":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[a("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},n=[];a("c5f6");Math.easeInOutQuad=function(t,e,a,i){return t/=i/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function l(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(t,e,a){var i=r(),n=t-i,o=20,c=0;e="undefined"===typeof e?500:e;var p=function t(){c+=o;var r=Math.easeInOutQuad(c,i,n,e);l(r),c<e?s(t):a&&"function"===typeof a&&a()};p()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50,100]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&o(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&o(0,800)}}},p=c,u=(a("1525"),a("2877")),d=Object(u["a"])(p,i,n,!1,null,"0300c9aa",null);e["a"]=d.exports},"55dd":function(t,e,a){"use strict";var i=a("5ca1"),n=a("d8e8"),s=a("4bf8"),l=a("79e5"),r=[].sort,o=[1,2,3];i(i.P+i.F*(l((function(){o.sort(void 0)}))||!l((function(){o.sort(null)}))||!a("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(s(this)):r.call(s(this),n(t))}})},"5dbc":function(t,e,a){var i=a("d3f4"),n=a("8b97").set;t.exports=function(t,e,a){var s,l=e.constructor;return l!==a&&"function"==typeof l&&(s=l.prototype)!==a.prototype&&i(s)&&n&&n(t,s),t}},6724:function(t,e,a){"use strict";a("8d41");var i="@@wavesContext";function n(t,e){function a(a){var i=Object.assign({},e.value),n=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),s=n.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var l=s.getBoundingClientRect(),r=s.querySelector(".waves-ripple");switch(r?r.className="waves-ripple":(r=document.createElement("span"),r.className="waves-ripple",r.style.height=r.style.width=Math.max(l.width,l.height)+"px",s.appendChild(r)),n.type){case"center":r.style.top=l.height/2-r.offsetHeight/2+"px",r.style.left=l.width/2-r.offsetWidth/2+"px";break;default:r.style.top=(a.pageY-l.top-r.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",r.style.left=(a.pageX-l.left-r.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return r.style.backgroundColor=n.color,r.className="waves-ripple z-active",!1}}return t[i]?t[i].removeHandle=a:t[i]={removeHandle:a},a}var s={bind:function(t,e){t.addEventListener("click",n(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[i].removeHandle,!1),t.addEventListener("click",n(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[i].removeHandle,!1),t[i]=null,delete t[i]}},l=function(t){t.directive("waves",s)};window.Vue&&(window.waves=s,Vue.use(l)),s.install=l;e["a"]=s},"68a7":function(t,e,a){},"8b97":function(t,e,a){var i=a("d3f4"),n=a("cb7c"),s=function(t,e){if(n(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(n){e=!0}return function(t,a){return s(t,a),e?t.__proto__=a:i(t,a),t}}({},!1):void 0),check:s}},"8d41":function(t,e,a){},"90a1":function(t,e,a){"use strict";a("68a7")},aa77:function(t,e,a){var i=a("5ca1"),n=a("be13"),s=a("79e5"),l=a("fdef"),r="["+l+"]",o="​",c=RegExp("^"+r+r+"*"),p=RegExp(r+r+"*$"),u=function(t,e,a){var n={},r=s((function(){return!!l[t]()||o[t]()!=o})),c=n[t]=r?e(d):l[t];a&&(n[a]=c),i(i.P+i.F*r,"String",n)},d=u.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(p,"")),t};t.exports=u},b224:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"我的平台",name:"account"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"回收站",name:"recycle"}})],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"平台名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},on:{change:t.handleFilter},model:{value:t.listQuery.type,callback:function(e){t.$set(t.listQuery,"type",e)},expression:"listQuery.type"}},t._l(t.typeOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),1),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"default",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("\n      搜索\n    ")]),t._v(" "),a("el-popover",{attrs:{placement:"right",title:"创建平台权限",width:"200",trigger:"hover"}},[a("div",{staticClass:"div-pop"},[a("span",[t._v("微信公众号：")]),t._v(" "),a("span",[t._v(t._s(t.calCreate("wx_gzh")))])]),t._v(" "),a("div",{staticClass:"div-pop"},[a("span",[t._v("微信小程序：")]),t._v(" "),a("span",[t._v(t._s(t.calCreate("wx_xcx")))])]),t._v(" "),a("div",{staticClass:"div-pop"},[a("span",[t._v("抖音小程序：")]),t._v(" "),a("span",[t._v(t._s(t.calCreate("zjtd_xcx")))])]),t._v(" "),a("div",{staticClass:"div-pop"},[a("span",[t._v("PC网站：")]),t._v(" "),a("span",[t._v(t._s(t.calCreate("pc")))])]),t._v(" "),a("div",{staticClass:"div-pop"},[a("span",[t._v("APP应用：")]),t._v(" "),a("span",[t._v(t._s(t.calCreate("app")))])]),t._v(" "),a("div",{staticClass:"div-pop"},[a("span",[t._v("支付宝小程序：")]),t._v(" "),a("span",[t._v(t._s(t.calCreate("zfb_xcx")))])]),t._v(" "),a("div",{staticClass:"div-pop"},[a("span",[t._v("百度小程序：")]),t._v(" "),a("span",[t._v(t._s(t.calCreate("bd_xcx")))])]),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"40px"},attrs:{slot:"reference",type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate},slot:"reference"},[t._v("\n        创建平台\n      ")])],1),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{plain:"",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete()}}},[t._v("\n      批量删除\n    ")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,fit:"","highlight-current-row":"","row-key":"id","expand-row-keys":t.expand_array},on:{"row-click":t.tabAccount,"sort-change":t.sortChange,"cell-mouse-enter":t.cellChange,"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"ID",prop:"id",sortable:"custom",align:"center",width:"60","class-name":t.getSortClass("id")},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"头像",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("img",{staticClass:"avatar",attrs:{src:t.calcAvatar(i)}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"名称",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"类型",width:"140px"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-tag",{attrs:{type:t.calcType(i.type),size:"small",effect:"plain"}},[a("span",[1==i.type?a("svg-icon",{attrs:{"icon-class":"wechat"}}):t._e(),t._v(" "),2==i.type?a("svg-icon",{attrs:{"icon-class":"wxxcx"}}):t._e(),t._v(" "),3==i.type?a("svg-icon",{attrs:{"icon-class":"douyin"}}):t._e(),t._v(" "),4==i.type?a("svg-icon",{attrs:{"icon-class":"web"}}):t._e(),t._v(" "),5==i.type?a("svg-icon",{attrs:{"icon-class":"app"}}):t._e(),t._v(" "),6==i.type?a("svg-icon",{attrs:{"icon-class":"zfbxcx"}}):t._e(),t._v(" "),7==i.type?a("svg-icon",{attrs:{"icon-class":"baidu"}}):t._e()],1),t._v("\n          "+t._s(t.typeOptions[i.type])+"\n        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"到期时间",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",{class:{"time-end":t.calcTime(i.end_time)}},[t._v(t._s(i.end_time))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"备注",width:"180px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",{staticClass:"height-limit"},[t._v(t._s(i.remark))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"150","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[2==i.role||2==t.userinfo.type?["account"==t.activeName?[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.handleUpdate(i)}}},[t._v("\n              编辑\n            ")]),t._v(" "),a("el-button",{attrs:{size:"mini",plain:"",type:"info"},on:{click:function(e){return e.stopPropagation(),t.handleDelete(i.id)}}},[t._v("\n              禁用\n            ")])]:t._e(),t._v(" "),"recycle"==t.activeName?[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"恢复当前平台",placement:"top"}},[a("el-button",{attrs:{size:"mini",plain:""},on:{click:function(e){return e.stopPropagation(),t.handleResume(i.id)}}},[t._v("\n                恢复\n              ")])],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"彻底删除当前平台",placement:"top"}},[a("el-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(e){return e.stopPropagation(),t.handleDelete(i.id)}}},[t._v("\n                删除\n              ")])],1)]:t._e()]:t._e(),t._v(" "),"account"==t.activeName?[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"置顶",placement:"top"}},[a("svg-icon",{staticClass:"icon-top",attrs:{"icon-class":"top"},on:{click:function(e){return e.stopPropagation(),t.tabTop(i)}}})],1)]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("div",{staticClass:"expand-div"},[a("el-link",{attrs:{underline:!1},on:{click:function(e){return e.stopPropagation(),t.clickAccount(i.id)}}},[t._v("使用者管理")]),t._v(" "),a("el-link",{attrs:{underline:!1},on:{click:function(e){return e.stopPropagation(),t.clickAppUse(i.id)}}},[t._v("应用模块管理")])],1)]}}])})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"平台类型",prop:"type"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{disabled:"update"==t.dialogStatus,placeholder:"选择平台的类型"},model:{value:t.temp.type,callback:function(e){t.$set(t.temp,"type",e)},expression:"temp.type"}},[a("el-option",{attrs:{label:"微信公众号",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"微信小程序",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"抖音小程序",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"PC网站",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"APP应用",value:"5"}}),t._v(" "),a("el-option",{attrs:{label:"支付宝小程序",value:"6"}}),t._v(" "),a("el-option",{attrs:{label:"百度小程序",value:"7"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"auto-upload":!1,"on-change":t.changeAvatar,accept:"image/*"}},[t.temp.avatar?a("img",{staticClass:"avatar-uploader-icon",attrs:{src:t.config.attach_url+t.temp.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{border:"1px dashed #d9d9d9"}})])],1),t._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"平台名称"},model:{value:t.temp.name,callback:function(e){t.$set(t.temp,"name",e)},expression:"temp.name"}})],1),t._v(" "),-1==["4","5"].indexOf(t.temp.type)?[a("el-form-item",{attrs:{label:"appid",prop:"appid"}},[a("el-input",{attrs:{placeholder:"appid标识"},model:{value:t.temp.appid,callback:function(e){t.$set(t.temp,"appid",e)},expression:"temp.appid"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Secret",prop:"secret"}},[a("el-input",{attrs:{placeholder:"Secret秘钥"},model:{value:t.temp.secret,callback:function(e){t.$set(t.temp,"secret",e)},expression:"temp.secret"}})],1)]:t._e(),t._v(" "),1==t.temp.type?[a("el-form-item",{attrs:{label:"类别",prop:"level"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{placeholder:"选择公众号类别"},model:{value:t.temp.level,callback:function(e){t.$set(t.temp,"level",e)},expression:"temp.level"}},[a("el-option",{attrs:{label:"普通订阅号",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"普通服务号",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"认证订阅号",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"认证服务号/媒体/政府",value:"4"}})],1)],1)]:t._e(),t._v(" "),a("el-form-item",{attrs:{label:"到期时间",prop:"end_time"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"平台到期时间"},model:{value:t.temp.end_time,callback:function(e){t.$set(t.temp,"end_time",e)},expression:"temp.end_time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{maxlength:"200","show-word-limit":"",autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"平台备注信息"},model:{value:t.temp.remark,callback:function(e){t.$set(t.temp,"remark",e)},expression:"temp.remark"}})],1)],2),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("\n        取消\n      ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.create():t.update()}}},[t._v("\n        确认\n      ")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"应用模块管理",visible:t.dialogAppVisible},on:{"update:visible":function(e){t.dialogAppVisible=e}}},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"应用名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.app_handleFilter(e)}},model:{value:t.app_listQuery.title,callback:function(e){t.$set(t.app_listQuery,"title",e)},expression:"app_listQuery.title"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"default",icon:"el-icon-search"},on:{click:t.app_handleFilter}},[t._v("\n        搜索\n      ")]),t._v(" "),a("el-switch",{staticStyle:{margin:"10px"},attrs:{"active-text":"已启用","active-color":"#13ce66"},on:{change:t.app_handleFilter},model:{value:t.app_listQuery.is_canuse,callback:function(e){t.$set(t.app_listQuery,"is_canuse",e)},expression:"app_listQuery.is_canuse"}})],1),t._v(" "),a("div",{staticClass:"app-list"},[t._l(t.app_list,(function(e){return[a("div",{key:e.s_id,staticClass:"app-item",on:{click:function(a){return t.clickApp(e.s_id)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.calMask(e.s_id),expression:"calMask(row.s_id)"}],staticClass:"app-mask"},[a("span",{staticClass:"el-icon-check"})]),t._v(" "),a("img",{staticClass:"app-avatar",attrs:{src:t.calcIcon(e)}}),t._v(" "),a("span",{staticClass:"app-span"},[1==e.s_type?a("svg-icon",{attrs:{"icon-class":"wechat"}}):t._e(),t._v(" "),2==e.s_type?a("svg-icon",{attrs:{"icon-class":"wxxcx"}}):t._e(),t._v(" "),3==e.s_type?a("svg-icon",{attrs:{"icon-class":"douyin"}}):t._e(),t._v(" "),4==e.s_type?a("svg-icon",{attrs:{"icon-class":"web"}}):t._e(),t._v(" "),5==e.s_type?a("svg-icon",{attrs:{"icon-class":"app"}}):t._e(),t._v(" "),6==e.s_type?a("svg-icon",{attrs:{"icon-class":"zfbxcx"}}):t._e(),t._v(" "),7==e.s_type?a("svg-icon",{attrs:{"icon-class":"baidu"}}):t._e(),t._v("\n            "+t._s(e.name)+"\n          ")],1)])]}))],2),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.app_total>0,expression:"app_total>0"}],attrs:{total:t.app_total,page:t.app_listQuery.page,limit:t.app_listQuery.limit},on:{"update:page":function(e){return t.$set(t.app_listQuery,"page",e)},"update:limit":function(e){return t.$set(t.app_listQuery,"limit",e)},pagination:function(e){return t.app_getList(!1)}}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogAppVisible=!1}}},[t._v("\n        取消\n      ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirmUseapp()}}},[t._v("\n        确认\n      ")])],1)],1)],1)},n=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("55dd"),a("7f7f"),a("a481"),a("ade3")),l=a("2f62"),r=a("0792"),o=a("91b6"),c=a("333d"),p=a("6724");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={name:"AccountList",components:{Pagination:c["a"]},directives:{waves:p["a"]},data:function(){return{activeName:"account",tableKey:0,list:[],total:0,listLoading:!0,auth_acid:"",app_list:[],useapp_list:[],app_total:0,attachurl:"",expand_array:[],listQuery:{page:1,limit:10,title:"",is_delete:0,sort:"-id",type:"0",ischeck:!1},app_listQuery:{page:1,limit:10,title:"",sort:"-id",is_canuse:!1},ids:[],imageUrl:"",typeOptions:{0:"全部",1:"微信公众号",2:"微信小程序",3:"抖音小程序",4:"PC网站",5:"APP应用",6:"支付宝小程序",7:"百度小程序"},sortOptions:[{label:"ID升序",key:"+id"},{label:"ID降序",key:"-id"}],props:{multiple:!1,checkStrictly:!0},options:[],temp:{id:"",type:"1",name:"",avatar:"",appid:"",secret:"",level:"4",end_time:"",remark:""},dialogFormVisible:!1,dialogUserVisible:!1,dialogAppVisible:!1,tempRefresh:{id:"",is_clock:"1",start_time:"",num:1,time_day:0,time_hour:0,time_minute:10},temp_refresh:[],dialogStatus:"",textMap:{update:"编辑",create:"添加"},dialogPvVisible:!1,pvData:[],rules:{name:[{required:!0,message:"昵称不能为空",trigger:"blur"}],number:[{required:!0,message:"不能为空",trigger:"blur"},{validator:r["a"],trigger:"blur"}]},downloadLoading:!1}},computed:d(d({},Object(l["c"])({config:function(t){return t.system.config}})),Object(l["b"])(["userinfo"])),created:function(){this.getList()},methods:{calcType:function(t){switch(t){case"1":case"2":return"success";case"3":return"info";case"4":case"5":return"danger";default:return""}},calcTime:function(t){if(!t)return!1;t=t.replace(/-/g,"/");var e=parseInt(new Date(t).getTime()/1e3),a=parseInt((new Date).getTime()/1e3);return a>e},tabClick:function(t,e){switch(t.name){case"account":this.listQuery.is_delete=0;break;case"recycle":this.listQuery.is_delete=1;break}this.handleFilter()},getList:function(){var t=this;this.listLoading=!0,this.$http.post("account/list",this.listQuery).then((function(e){t.list=e.data.items,t.total=parseInt(e.data.total),t.listLoading=!1}))},tabTop:function(t){var e=this,a={acid:t.id};this.$http.post("account/topAccount",a).then((function(t){e.handleFilter(),e.$notify({title:"成功",message:t.message,type:"success",duration:2e3})}))},calcAvatar:function(t){return t.avatar?this.config.attach_url+t.avatar:this.config.web_url+"/attachment/logo.png"},calcIcon:function(t){return t.logo?this.config.attach_url+t.logo:t.icon?this.config.web_url+"/"+t.dir+"/"+t.identity+"/"+t.icon:this.config.web_url+"/attachment/logo.png"},clickApp:function(t){var e=this.useapp_list.indexOf(t);e>-1?this.useapp_list.splice(e,1):this.useapp_list.push(t)},calMask:function(t){return this.useapp_list.indexOf(t)>-1},clickAccount:function(t){t&&this.$router.push({name:"AccountUser",query:{acid:t}})},clickAppUse:function(t){this.auth_acid=t,this.app_list=[],this.app_getList(!0)},app_handleFilter:function(){this.app_listQuery.page=1,this.app_getList()},app_getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.useapp_list=[],this.app_listQuery={page:1,limit:10,title:"",sort:"-id",is_canuse:!1});var a=Object.assign({acid:this.auth_acid},this.app_listQuery);e&&(a.first=1),this.$http.post("account/appList",a).then((function(a){t.app_list=a.data.items,t.app_total=parseInt(a.data.total),e&&(t.useapp_list=a.data.useapp),t.dialogAppVisible=!0}))},confirmUseapp:function(){var t=this,e={acid:this.auth_acid,useapp:this.useapp_list};this.$http.post("account/useapp",e).then((function(e){t.dialogAppVisible=!1,t.useapp_list=[],t.auth_acid="",t.$notify({title:"成功",message:e.message,type:"success",duration:2e3})}))},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},resetTemp:function(){this.temp={id:"",type:"1",name:"",avatar:"",appid:"",secret:"",level:"4",end_time:"",remark:""}},changeAvatar:function(t,e){var a=this;Object(o["b"])(t,e).then((function(t){a.temp.avatar=t}))},create:function(){var t=this,e=this;this.$refs["dataForm"].validate((function(a){a&&e.$http.post("account/create",e.temp).then((function(a){e.dialogFormVisible=!1,e.handleFilter(),1==t.userinfo.type&&t.$store.dispatch("user/getInfo"),e.$notify({title:"成功",message:a.message,type:"success",duration:2e3})}))}))},handleFilter:function(){this.listQuery.page=1,this.getList()},handleUpdate:function(t){var e=this;this.dialogStatus="update",this.temp=Object.assign({},t),this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},update:function(){var t=this,e=this;this.$refs["dataForm"].validate((function(a){if(a){var i=Object.assign({acid:e.temp.id},t.temp);e.$http.post("account/update",i).then((function(t){e.dialogFormVisible=!1,e.handleFilter(),e.$notify({title:"成功",message:t.message,type:"success",duration:2e3})}))}}))},handleDelete:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=[];a=e?[e]:this.ids,a.length>0?this.$confirm("确认操作选择的对象?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http.post("account/delete",{ids:a,is_delete:t.listQuery.is_delete}).then((function(e){t.handleFilter(),t.$notify({title:"成功",message:e.message,type:"success",duration:2e3})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})})):this.$notify({title:"失败",message:"请选择要删除的对象",type:"warning",duration:2e3})},handleResume:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=[];e&&(a=[e],this.$http.post("account/resume",{ids:a}).then((function(e){t.handleFilter(),t.$notify({title:"成功",message:e.message,type:"success",duration:2e3})})))},calCreate:function(t){return 2==this.userinfo.type?"不限":this.userinfo.create_auth?this.userinfo.create_auth[t]+"个":"0个"},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([a.e("chunk-491b65a4"),a.e("chunk-748b566e")]).then(a.bind(null,"4bf8d")).then((function(e){var a=["id","名称","类型","appid","secret","到期时间","备注"],i=["id","name","type","appid","secret","end_time","remark"],n=t.formatJson(i);e.export_json_to_excel({header:a,data:n,filename:"list"}),t.downloadLoading=!1}))},formatJson:function(t){var e=this;return this.list.map((function(a){return t.map((function(t){return"type"===t?e.typeOptions[a[t]]:a[t]}))}))},getSortClass:function(t){var e=this.listQuery.sort;return e==="+".concat(t)?"ascending":"descending"},handleSelectionChange:function(t){this.ids=t.map((function(t){return t.id}))},sortChange:function(t){var e=t.prop,a=t.order;"id"===e&&this.sortByID(a)},sortByID:function(t){this.listQuery.sort="ascending"===t?"+id":"-id",this.handleFilter()},cellChange:function(t){2==t.role||2==this.userinfo.type?this.expand_array=[t.id]:this.expand_array=[]},tabAccount:function(t){t.id&&this.$router.push({name:"AccountInfo",query:{acid:t.id}})}}},v=f,m=(a("90a1"),a("2877")),h=Object(m["a"])(v,i,n,!1,null,"384af0fa",null);e["default"]=h.exports},c5f6:function(t,e,a){"use strict";var i=a("7726"),n=a("69a8"),s=a("2d95"),l=a("5dbc"),r=a("6a99"),o=a("79e5"),c=a("9093").f,p=a("11e9").f,u=a("86cc").f,d=a("aa77").trim,f="Number",v=i[f],m=v,h=v.prototype,_=s(a("2aeb")(h))==f,g="trim"in String.prototype,y=function(t){var e=r(t,!1);if("string"==typeof e&&e.length>2){e=g?e.trim():d(e,3);var a,i,n,s=e.charCodeAt(0);if(43===s||45===s){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+e}for(var l,o=e.slice(2),c=0,p=o.length;c<p;c++)if(l=o.charCodeAt(c),l<48||l>n)return NaN;return parseInt(o,i)}}return+e};if(!v(" 0o1")||!v("0b1")||v("+0x1")){v=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof v&&(_?o((function(){h.valueOf.call(a)})):s(a)!=f)?l(new m(y(e)),a,v):y(e)};for(var b,w=a("9e1e")?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;w.length>k;k++)n(m,b=w[k])&&!n(v,b)&&u(v,b,p(m,b));v.prototype=h,h.constructor=v,a("2aba")(i,f,v)}},f157:function(t,e,a){},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);