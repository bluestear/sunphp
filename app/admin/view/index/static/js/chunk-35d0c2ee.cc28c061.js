(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35d0c2ee"],{"28a5":function(t,e,i){"use strict";var n=i("aae3"),s=i("cb7c"),a=i("ebd6"),r=i("0390"),l=i("9def"),o=i("5f1b"),c=i("520a"),u=i("79e5"),p=Math.min,v=[].push,f="split",d="length",m="lastIndex",y=4294967295,h=!u((function(){RegExp(y,"y")}));i("214f")("split",2,(function(t,e,i,u){var g;return g="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[d]||2!="ab"[f](/(?:ab)*/)[d]||4!="."[f](/(.?)(.?)/)[d]||"."[f](/()()/)[d]>1||""[f](/.?/)[d]?function(t,e){var s=String(this);if(void 0===t&&0===e)return[];if(!n(t))return i.call(s,t,e);var a,r,l,o=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,f=void 0===e?y:e>>>0,h=new RegExp(t.source,u+"g");while(a=c.call(h,s)){if(r=h[m],r>p&&(o.push(s.slice(p,a.index)),a[d]>1&&a.index<s[d]&&v.apply(o,a.slice(1)),l=a[0][d],p=r,o[d]>=f))break;h[m]===a.index&&h[m]++}return p===s[d]?!l&&h.test("")||o.push(""):o.push(s.slice(p)),o[d]>f?o.slice(0,f):o}:"0"[f](void 0,0)[d]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,n){var s=t(this),a=void 0==i?void 0:i[e];return void 0!==a?a.call(i,s,n):g.call(String(s),i,n)},function(t,e){var n=u(g,t,this,e,g!==i);if(n.done)return n.value;var c=s(t),v=String(this),f=a(c,RegExp),d=c.unicode,m=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(h?"y":"g"),b=new f(h?c:"^(?:"+c.source+")",m),_=void 0===e?y:e>>>0;if(0===_)return[];if(0===v.length)return null===o(b,v)?[v]:[];var x=0,w=0,k=[];while(w<v.length){b.lastIndex=h?w:0;var O,$=o(b,h?v:v.slice(w));if(null===$||(O=p(l(b.lastIndex+(h?0:w)),v.length))===x)w=r(v,w,d);else{if(k.push(v.slice(x,w)),k.length===_)return k;for(var V=1;V<=$.length-1;V++)if(k.push($[V]),k.length===_)return k;w=x=O}}return k.push(v.slice(x)),k}]}))},"2f5f":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"版本升级",name:"upgrade"}},[i("el-form",{ref:"sysForm",staticStyle:{width:"500px","margin-top":"20px"},attrs:{model:t.system,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"系统版本",prop:"version"}},[i("el-input",{attrs:{value:t.calcVersion(),disabled:""}})],1),t._v(" "),i("el-form-item",{attrs:{label:"php版本",prop:"php"}},[i("el-input",{attrs:{disabled:""},model:{value:t.system.php,callback:function(e){t.$set(t.system,"php",e)},expression:"system.php"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"服务器",prop:"linux"}},[i("el-input",{attrs:{disabled:""},model:{value:t.system.linux,callback:function(e){t.$set(t.system,"linux",e)},expression:"system.linux"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.upgrade}},[t._v("一键升级")]),t._v(" "),t.newVersion()?i("el-tag",{staticStyle:{"margin-left":"20px"},attrs:{type:"default",size:"small",effect:"plain"}},[t._v("\n            "+t._s("新版本"+t.system.new_version)+"\n          ")]):t._e()],1),t._v(" "),i("div",{staticClass:"div-activate",on:{dblclick:function(e){return e.stopPropagation(),e.preventDefault(),t.dbVersion()}}})],1)],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"高级商用版",visible:t.dialogVersion},on:{"update:visible":function(e){t.dialogVersion=e}}},[i("el-form",{ref:"activateForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{model:t.activation,"label-position":"left","label-width":"100px"}},[2!=t.config.sys_type?i("el-form-item",{attrs:{label:"激活秘钥",prop:"url"}},[i("el-input",{ref:"url_input",attrs:{autosize:{minRows:4,maxRows:6},type:"textarea",placeholder:"填入您的激活秘钥"},model:{value:t.activation.url,callback:function(e){t.$set(t.activation,"url",e)},expression:"activation.url"}}),t._v(" "),i("div",[i("span",{staticStyle:{"font-size":"12px"}},[t._v("获取官方激活秘钥")]),t._v(" "),i("el-link",{attrs:{type:"primary",target:"_blank",href:"https://bluestear.gitee.io/sunphp-web/advanced/"}},[t._v("sunphp")])],1)],1):t._e(),t._v(" "),2==t.config.sys_type?i("el-form-item",{attrs:{label:"激活秘钥"}},[i("el-input",{ref:"secret_input",attrs:{value:t.system.activate_key,type:"text",placeholder:"当前系统激活秘钥"}}),t._v(" "),i("div",[i("span",{staticStyle:{"font-size":"12px"}},[t._v("高级商用版系统秘钥，正版校验查询")]),t._v(" "),i("el-link",{attrs:{type:"primary",target:"_blank",href:"https://bluestear.gitee.io/sunphp-web/advanced/"}},[t._v("sunphp")])],1)],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"应用市场",prop:"sys_mall"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{placeholder:"设置应用市场"},model:{value:t.activation.sys_mall,callback:function(e){t.$set(t.activation,"sys_mall",e)},expression:"activation.sys_mall"}},[i("el-option",{attrs:{label:"隐藏应用市场（慎重！）",value:"2"}}),t._v(" "),i("el-option",{attrs:{label:"显示应用市场",value:"1"}})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"系统升级",prop:"sys_upgrade"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{placeholder:"设置系统升级"},model:{value:t.activation.sys_upgrade,callback:function(e){t.$set(t.activation,"sys_upgrade",e)},expression:"activation.sys_upgrade"}},[i("el-option",{attrs:{label:"隐藏系统升级（慎重！）",value:"2"}}),t._v(" "),i("el-option",{attrs:{label:"显示系统升级",value:"1"}})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"高级版权限"}},[i("div",[t._v("\n          1，隐藏系统版权文字（powered by sunphp）\n        ")]),t._v(" "),i("div",[t._v("\n          2，可选设置隐藏应用市场（应用管理中不显示应用市场）\n        ")]),t._v(" "),i("div",[t._v("\n          3，可选设置隐藏系统升级（不显示系统升级菜单）\n        ")])])],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVersion=!1}}},[t._v("\n        取消\n      ")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.activateClick()}}},[t._v("\n        确认\n      ")])],1)],1)],1)},s=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("28a5"),i("ade3")),r=i("2f62");function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){Object(a["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var c={name:"VersionUpgrade",components:{},data:function(){return{activeName:"upgrade",system:{},dialogVersion:!1,activation:{url:"",sys_upgrade:"1",sys_mall:"1"},rules:{notEmpty:[{required:!0,trigger:"blur",message:"不能为空"}]}}},computed:o({},Object(r["c"])({config:function(t){return t.system.config}})),created:function(){this.get()},methods:{newVersion:function(){var t=this.system;if(!t.new_version||!t.version)return!1;for(var e=t.new_version.split("."),i=t.version.split("."),n=0;n<3;n++){if(e[n]>i[n])return!0;if(e[n]!=i[n])return!1}return!1},calcVersion:function(){return 1==this.config.sys_type?"Sunphp框架 (免费商用版) Version"+this.system.version:"Sunphp框架 (高级商用版) Version"+this.system.version},dbVersion:function(){var t=this;this.dialogVersion=!0,this.$nextTick((function(){2==t.config.sys_type?t.$refs.secret_input.focus():t.$refs.url_input.focus()}))},get:function(){var t=this;this.$http.post("system/version",{}).then((function(e){t.activation.sys_upgrade=t.config.sys_upgrade,t.activation.sys_mall=t.config.sys_mall,e.data&&(t.system=e.data)}))},upgrade:function(){var t=this,e="确认一键升级本系统吗？升级前请先做好备份！",i="版本升级";this.$confirm(e,i,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http.post("system/upgrade",{}).then((function(e){t.$notify({title:"成功",message:e.message,type:"success",duration:2e3}),setTimeout((function(){location.reload()}),1e3)}))})).catch((function(){t.$message({type:"info",message:"已取消"})}))},activateClick:function(){var t=this;this.$http.post("system/activate",this.activation).then((function(e){t.$notify({title:"成功",message:e.message,type:"success",duration:2e3}),t.dialogVersion=!1,setTimeout((function(){location.reload()}),1e3)}))}}},u=c,p=(i("99ab"),i("2877")),v=Object(p["a"])(u,n,s,!1,null,"50c43691",null);e["default"]=v.exports},"99ab":function(t,e,i){"use strict";i("c7c8")},c7c8:function(t,e,i){}}]);