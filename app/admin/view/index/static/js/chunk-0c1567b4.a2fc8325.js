(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c1567b4"],{"0792":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return s}));var i=a("61f7");function n(t,e,a){if(e){if(!Object(i["f"])(e)&&!Object(i["e"])(e))return a(new Error("号码填写不正确"));a()}else a()}function s(t,e,a){if(e){if(!Object(i["d"])(e))return a(new Error("数字填写不正确"));a()}else a()}},1525:function(t,e,a){"use strict";a("f157")},"2f21":function(t,e,a){"use strict";var i=a("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"333d":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[a("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},n=[];a("c5f6");Math.easeInOutQuad=function(t,e,a,i){return t/=i/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function l(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function c(t,e,a){var i=r(),n=t-i,c=20,o=0;e="undefined"===typeof e?500:e;var u=function t(){o+=c;var r=Math.easeInOutQuad(o,i,n,e);l(r),o<e?s(t):a&&"function"===typeof a&&a()};u()}var o={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50,100]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&c(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&c(0,800)}}},u=o,p=(a("1525"),a("2877")),d=Object(p["a"])(u,i,n,!1,null,"0300c9aa",null);e["a"]=d.exports},3903:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"我的用户",name:"user"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"待审核",name:"review"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"回收站",name:"recycle"}})],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"用户昵称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},on:{change:t.handleFilter},model:{value:t.listQuery.type,callback:function(e){t.$set(t.listQuery,"type",e)},expression:"listQuery.type"}},t._l(t.typeOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),1),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"default",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("\n      搜索\n    ")]),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"40px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v("\n      创建用户\n    ")]),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{plain:"",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete()}}},[t._v("\n      批量删除\n    ")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,fit:"","highlight-current-row":"","row-key":"id","expand-row-keys":t.expand_array},on:{"sort-change":t.sortChange,"cell-mouse-enter":t.cellChange,"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"头像",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("img",{staticClass:"avatar",attrs:{src:t.calcAvatar(i)}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"名称",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"类型",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-tag",{attrs:{type:t.calcType(i.type),size:"small",effect:"plain"}},[t._v("\n          "+t._s(t.typeOptions[i.type])+"\n        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"到期时间",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.end_time))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"上次登录",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.login_time))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"备注",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",{staticClass:"height-limit"},[t._v(t._s(i.remark))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"150","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return["user"==t.activeName?[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handleUpdate(i)}}},[t._v("\n            编辑\n          ")]),t._v(" "),a("el-button",{attrs:{size:"mini",plain:"",type:"info"},on:{click:function(e){return t.handleDelete(i.id)}}},[t._v("\n            禁用\n          ")])]:t._e(),t._v(" "),"review"==t.activeName?[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handleResume(i.id,1)}}},[t._v("\n            通过\n          ")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.handleDelete(i.id)}}},[t._v("\n            拒绝\n          ")])]:t._e(),t._v(" "),"recycle"==t.activeName?[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"恢复当前平台",placement:"top"}},[a("el-button",{attrs:{size:"mini",plain:""},on:{click:function(e){return t.handleResume(i.id)}}},[t._v("\n              恢复\n            ")])],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"彻底删除当前平台",placement:"top"}},[a("el-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(e){return t.handleDelete(i.id)}}},[t._v("\n              删除\n            ")])],1)]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("div",{staticClass:"expand-div"},[a("el-link",{attrs:{underline:!1},on:{click:function(e){return t.clickCreate(i.id)}}},[t._v("创建平台权限")]),t._v(" "),a("el-link",{attrs:{underline:!1},on:{click:function(e){return t.clickAccount(i.id)}}},[t._v("使用平台权限")]),t._v(" "),a("el-link",{attrs:{underline:!1},on:{click:function(e){return t.clickAppUse(i.id)}}},[t._v("应用模块权限")])],1)]}}])})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户类型",prop:"type"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{placeholder:"选择用户的类型"},model:{value:t.temp.type,callback:function(e){t.$set(t.temp,"type",e)},expression:"temp.type"}},[a("el-option",{attrs:{label:"普通用户",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"系统管理员",value:"2"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"auto-upload":!1,"on-change":t.changeAvatar,accept:"image/*"}},[t.temp.avatar?a("img",{staticClass:"avatar-uploader-icon",attrs:{src:t.config.attach_url+t.temp.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{border:"1px dashed #d9d9d9"}})])],1),t._v(" "),a("el-form-item",{attrs:{label:"昵称",prop:"name"}},[a("el-input",{attrs:{placeholder:"用户昵称"},model:{value:t.temp.name,callback:function(e){t.$set(t.temp,"name",e)},expression:"temp.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[a("el-input",{attrs:{placeholder:"update"==t.dialogStatus?"留空则不修改密码":"登录密码"},model:{value:t.temp.pwd,callback:function(e){t.$set(t.temp,"pwd",e)},expression:"temp.pwd"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{placeholder:"用户手机号"},model:{value:t.temp.phone,callback:function(e){t.$set(t.temp,"phone",e)},expression:"temp.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"到期时间",prop:"end_time"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"平台到期时间"},model:{value:t.temp.end_time,callback:function(e){t.$set(t.temp,"end_time",e)},expression:"temp.end_time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{maxlength:"200","show-word-limit":"",autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"平台备注信息"},model:{value:t.temp.remark,callback:function(e){t.$set(t.temp,"remark",e)},expression:"temp.remark"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("\n        取消\n      ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.create():t.update()}}},[t._v("\n        确认\n      ")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"创建平台权限",visible:t.dialogAuthVisible},on:{"update:visible":function(e){t.dialogAuthVisible=e}}},[a("el-form",{ref:"createForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{model:t.temp_create,"label-position":"left","label-width":"150px"}},[a("el-form-item",{attrs:{label:"微信公众号",prop:"wx_gzh",rules:t.rules.number}},[a("el-input",{attrs:{type:"number"},model:{value:t.temp_create.wx_gzh,callback:function(e){t.$set(t.temp_create,"wx_gzh",e)},expression:"temp_create.wx_gzh"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"微信小程序",prop:"wx_xcx",rules:t.rules.number}},[a("el-input",{attrs:{type:"number"},model:{value:t.temp_create.wx_xcx,callback:function(e){t.$set(t.temp_create,"wx_xcx",e)},expression:"temp_create.wx_xcx"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"抖音小程序",prop:"zjtd_xcx",rules:t.rules.number}},[a("el-input",{attrs:{type:"number"},model:{value:t.temp_create.zjtd_xcx,callback:function(e){t.$set(t.temp_create,"zjtd_xcx",e)},expression:"temp_create.zjtd_xcx"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"PC网站",prop:"pc",rules:t.rules.number}},[a("el-input",{attrs:{type:"number"},model:{value:t.temp_create.pc,callback:function(e){t.$set(t.temp_create,"pc",e)},expression:"temp_create.pc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"APP应用",prop:"app",rules:t.rules.number}},[a("el-input",{attrs:{type:"number"},model:{value:t.temp_create.app,callback:function(e){t.$set(t.temp_create,"app",e)},expression:"temp_create.app"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"支付宝小程序",prop:"zfb_xcx",rules:t.rules.number}},[a("el-input",{attrs:{type:"number"},model:{value:t.temp_create.zfb_xcx,callback:function(e){t.$set(t.temp_create,"zfb_xcx",e)},expression:"temp_create.zfb_xcx"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"百度小程序",prop:"bd_xcx",rules:t.rules.number}},[a("el-input",{attrs:{type:"number"},model:{value:t.temp_create.bd_xcx,callback:function(e){t.$set(t.temp_create,"bd_xcx",e)},expression:"temp_create.bd_xcx"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogAuthVisible=!1}}},[t._v("\n        取消\n      ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.authClick()}}},[t._v("\n        确认\n      ")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"应用模块权限",visible:t.dialogAppVisible},on:{"update:visible":function(e){t.dialogAppVisible=e}}},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"应用名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.app_handleFilter(e)}},model:{value:t.app_listQuery.title,callback:function(e){t.$set(t.app_listQuery,"title",e)},expression:"app_listQuery.title"}}),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},on:{change:t.app_handleFilter},model:{value:t.app_listQuery.type,callback:function(e){t.$set(t.app_listQuery,"type",e)},expression:"app_listQuery.type"}},t._l(t.app_typeOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),1),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"default",icon:"el-icon-search"},on:{click:t.app_handleFilter}},[t._v("\n        搜索\n      ")]),t._v(" "),a("el-switch",{staticStyle:{margin:"10px"},attrs:{"active-text":"已启用","active-color":"#13ce66"},on:{change:t.app_handleFilter},model:{value:t.app_listQuery.is_canuse,callback:function(e){t.$set(t.app_listQuery,"is_canuse",e)},expression:"app_listQuery.is_canuse"}})],1),t._v(" "),a("div",{staticClass:"app-list"},[t._l(t.app_list,(function(e){return[a("div",{key:e.s_id,staticClass:"app-item",on:{click:function(a){return t.clickApp(e.s_id)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.calMask(e.s_id),expression:"calMask(row.s_id)"}],staticClass:"app-mask"},[a("span",{staticClass:"el-icon-check"})]),t._v(" "),a("img",{staticClass:"app-avatar",attrs:{src:t.calcIcon(e)}}),t._v(" "),a("span",{staticClass:"app-span"},[1==e.s_type?a("svg-icon",{attrs:{"icon-class":"wechat"}}):t._e(),t._v(" "),2==e.s_type?a("svg-icon",{attrs:{"icon-class":"wxxcx"}}):t._e(),t._v(" "),3==e.s_type?a("svg-icon",{attrs:{"icon-class":"douyin"}}):t._e(),t._v(" "),4==e.s_type?a("svg-icon",{attrs:{"icon-class":"web"}}):t._e(),t._v(" "),5==e.s_type?a("svg-icon",{attrs:{"icon-class":"app"}}):t._e(),t._v(" "),6==e.s_type?a("svg-icon",{attrs:{"icon-class":"zfbxcx"}}):t._e(),t._v(" "),7==e.s_type?a("svg-icon",{attrs:{"icon-class":"baidu"}}):t._e(),t._v("\n            "+t._s(e.name)+"\n          ")],1)])]}))],2),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.app_total>0,expression:"app_total>0"}],attrs:{total:t.app_total,page:t.app_listQuery.page,limit:t.app_listQuery.limit},on:{"update:page":function(e){return t.$set(t.app_listQuery,"page",e)},"update:limit":function(e){return t.$set(t.app_listQuery,"limit",e)},pagination:function(e){return t.app_getList(!1)}}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogAppVisible=!1}}},[t._v("\n        取消\n      ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirmUseapp()}}},[t._v("\n        确认\n      ")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"使用平台权限",visible:t.dialogAccountVisible},on:{"update:visible":function(e){t.dialogAccountVisible=e}}},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"应用名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.account_handleFilter(e)}},model:{value:t.account_listQuery.title,callback:function(e){t.$set(t.account_listQuery,"title",e)},expression:"account_listQuery.title"}}),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},on:{change:t.account_handleFilter},model:{value:t.account_listQuery.type,callback:function(e){t.$set(t.account_listQuery,"type",e)},expression:"account_listQuery.type"}},t._l(t.app_typeOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),1),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"default",icon:"el-icon-search"},on:{click:t.account_handleFilter}},[t._v("\n        搜索\n      ")]),t._v(" "),a("el-switch",{staticStyle:{margin:"10px"},attrs:{"active-text":"可使用","active-color":"#13ce66"},on:{change:t.account_handleFilter},model:{value:t.account_listQuery.is_canuse,callback:function(e){t.$set(t.account_listQuery,"is_canuse",e)},expression:"account_listQuery.is_canuse"}})],1),t._v(" "),a("div",{staticClass:"app-list"},[t._l(t.account_list,(function(e){return[a("div",{key:e.id,staticClass:"app-item",on:{click:function(a){return t.checkAccount(e.id)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.calAccountMask(e.id),expression:"calAccountMask(row.id)"}],staticClass:"app-mask"},[a("span",{staticClass:"el-icon-check"})]),t._v(" "),a("img",{staticClass:"app-avatar",attrs:{src:t.calcAvatar(e)}}),t._v(" "),a("span",{staticClass:"app-span"},[1==e.type?a("svg-icon",{attrs:{"icon-class":"wechat"}}):t._e(),t._v(" "),2==e.type?a("svg-icon",{attrs:{"icon-class":"wxxcx"}}):t._e(),t._v(" "),3==e.type?a("svg-icon",{attrs:{"icon-class":"douyin"}}):t._e(),t._v(" "),4==e.type?a("svg-icon",{attrs:{"icon-class":"web"}}):t._e(),t._v(" "),5==e.type?a("svg-icon",{attrs:{"icon-class":"app"}}):t._e(),t._v(" "),6==e.type?a("svg-icon",{attrs:{"icon-class":"zfbxcx"}}):t._e(),t._v(" "),7==e.type?a("svg-icon",{attrs:{"icon-class":"baidu"}}):t._e(),t._v("\n            "+t._s(e.name)+"\n          ")],1)])]}))],2),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.account_total>0,expression:"account_total>0"}],attrs:{total:t.account_total,page:t.account_listQuery.page,limit:t.account_listQuery.limit},on:{"update:page":function(e){return t.$set(t.account_listQuery,"page",e)},"update:limit":function(e){return t.$set(t.account_listQuery,"limit",e)},pagination:function(e){return t.account_getList(!1)}}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogAccountVisible=!1}}},[t._v("\n        取消\n      ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirmUseaccount()}}},[t._v("\n        确认\n      ")])],1)],1)],1)},n=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("55dd"),a("7f7f"),a("ade3")),l=a("2f62"),r=a("0792"),c=a("91b6"),o=a("333d"),u=a("6724");function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={name:"UserList",components:{Pagination:o["a"]},directives:{waves:u["a"]},data:function(){return{activeName:"user",activeAuth:"auth_account",tableKey:0,expand_array:[],list:[],total:0,app_total:0,account_total:0,listLoading:!0,attachurl:"",auth_uid:"",listQuery:{page:1,limit:10,title:"",is_delete:0,sort:"-id",type:"0",ischeck:!1},app_listQuery:{page:1,limit:10,title:"",sort:"-id",type:"0",is_canuse:!1},ids:[],app_list:[],useapp_list:[],account_listQuery:{page:1,limit:10,title:"",sort:"-id",type:"0",is_canuse:!1},account_list:[],useaccount_list:[],imageUrl:"",typeOptions:{0:"全部",1:"普通用户",2:"系统管理员"},app_typeOptions:{0:"全部",1:"微信公众号",2:"微信小程序",3:"抖音小程序",4:"PC网站",5:"APP应用",6:"支付宝小程序",7:"百度小程序"},sortOptions:[{label:"ID升序",key:"+id"},{label:"ID降序",key:"-id"}],props:{multiple:!1,checkStrictly:!0},options:[],temp_create:{wx_gzh:0,wx_xcx:0,zjtd_xcx:0,pc:0,app:0,zfb_xcx:0,bd_xcx:0},temp:{id:"",type:"1",name:"",avatar:"",pwd:"",phone:"",end_time:"",remark:""},dialogFormVisible:!1,dialogAuthVisible:!1,dialogAppVisible:!1,dialogAccountVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"添加"},dialogPvVisible:!1,pvData:[],rules:{name:[{required:!0,message:"昵称不能为空",trigger:"blur"}],number:[{required:!0,message:"不能为空",trigger:"blur"},{validator:r["a"],trigger:"blur"}],phone:[{validator:r["b"],trigger:"blur"}]},downloadLoading:!1}},computed:d({},Object(l["c"])({config:function(t){return t.system.config}})),created:function(){this.getList()},methods:{calcType:function(t){switch(t){case"1":return"success";case"2":return"danger";default:return""}},calcAvatar:function(t){return t.avatar?this.config.attach_url+t.avatar:this.config.web_url+"/attachment/logo.png"},calcIcon:function(t){return t.logo?this.config.attach_url+t.logo:t.icon?this.config.web_url+"/"+t.dir+"/"+t.identity+"/"+t.icon:this.config.web_url+"/attachment/logo.png"},clickApp:function(t){var e=this.useapp_list.indexOf(t);e>-1?this.useapp_list.splice(e,1):this.useapp_list.push(t)},calMask:function(t){return this.useapp_list.indexOf(t)>-1},checkAccount:function(t){var e=this.useaccount_list.indexOf(t);e>-1?this.useaccount_list.splice(e,1):this.useaccount_list.push(t)},calAccountMask:function(t){return this.useaccount_list.indexOf(t)>-1},tabClick:function(t,e){switch(t.name){case"user":this.listQuery.is_delete=0;break;case"recycle":this.listQuery.is_delete=1;break;case"review":this.listQuery.is_delete=2}this.handleFilter()},getList:function(){var t=this;this.listLoading=!0,this.$http.post("user/list",this.listQuery).then((function(e){t.list=e.data.items,t.total=parseInt(e.data.total),t.listLoading=!1}))},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},resetTemp:function(){this.temp={id:"",type:"1",name:"",avatar:"",pwd:"",phone:"",end_time:"",remark:""}},changeAvatar:function(t,e){var a=this;Object(c["b"])(t,e).then((function(t){a.temp.avatar=t}))},create:function(){var t=this;this.$refs["dataForm"].validate((function(e){e&&t.$http.post("user/create",t.temp).then((function(e){t.dialogFormVisible=!1,t.handleFilter(),t.$notify({title:"成功",message:e.message,type:"success",duration:2e3})}))}))},handleFilter:function(){this.listQuery.page=1,this.getList()},handleUpdate:function(t){var e=this;this.dialogStatus="update",this.temp=Object.assign({},t),this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},update:function(){var t=this,e=this;this.$refs["dataForm"].validate((function(a){if(a){var i=Object.assign({},t.temp);e.$http.post("user/update",i).then((function(t){e.dialogFormVisible=!1,e.handleFilter(),e.$notify({title:"成功",message:t.message,type:"success",duration:2e3})}))}}))},handleDelete:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=[];a=e?[e]:this.ids,a.length>0?this.$confirm("确认操作选择的对象?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http.post("user/delete",{ids:a,is_delete:t.listQuery.is_delete}).then((function(e){t.handleFilter(),t.$notify({title:"成功",message:e.message,type:"success",duration:2e3})}))})).catch((function(){t.$message({type:"info",message:"已取消"})})):this.$notify({title:"失败",message:"请选择要删除的对象",type:"warning",duration:2e3})},app_handleFilter:function(){this.app_listQuery.page=1,this.app_getList()},account_handleFilter:function(){this.account_listQuery.page=1,this.account_getList()},clickAppUse:function(t){this.auth_uid=t,this.app_list=[],this.app_getList(!0)},clickAccount:function(t){this.auth_uid=t,this.account_list=[],this.account_getList(!0)},app_getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.useapp_list=[],this.app_listQuery={page:1,limit:10,title:"",sort:"-id",type:"0",is_canuse:!1});var a=Object.assign({uid:this.auth_uid},this.app_listQuery);e&&(a.first=1),this.$http.post("app/authList",a).then((function(a){t.app_list=a.data.items,t.app_total=parseInt(a.data.total),e&&(t.useapp_list=a.data.useapp),t.dialogAppVisible=!0}))},account_getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.useaccount_list=[],this.account_listQuery={page:1,limit:10,title:"",sort:"-id",type:"0",is_canuse:!1});var a=Object.assign({uid:this.auth_uid},this.account_listQuery);e&&(a.first=1),this.$http.post("user/authList",a).then((function(a){t.account_list=a.data.items,t.account_total=parseInt(a.data.total),e&&(t.useaccount_list=a.data.useaccount),t.dialogAccountVisible=!0}))},confirmUseapp:function(){var t=this,e={uid:this.auth_uid,useapp:this.useapp_list};this.$http.post("app/useapp",e).then((function(e){t.dialogAppVisible=!1,t.useapp_list=[],t.auth_uid="",t.$notify({title:"成功",message:e.message,type:"success",duration:2e3})}))},confirmUseaccount:function(){var t=this,e={uid:this.auth_uid,useaccount:this.useaccount_list};this.$http.post("user/useaccount",e).then((function(e){t.dialogAccountVisible=!1,t.useaccount_list=[],t.auth_uid="",t.$notify({title:"成功",message:e.message,type:"success",duration:2e3})}))},clickCreate:function(t){var e=this;this.auth_uid=t,this.temp_create={wx_gzh:0,wx_xcx:0,zjtd_xcx:0,pc:0,app:0,zfb_xcx:0,bd_xcx:0},this.$http.post("user/getAuth",{uid:t}).then((function(t){t.data.create&&(e.temp_create=t.data.create),e.dialogAuthVisible=!0}))},authClick:function(){var t=this;this.$http.post("user/auth",{uid:this.auth_uid,create:this.temp_create}).then((function(e){t.dialogAuthVisible=!1,t.$notify({title:"成功",message:e.message,type:"success",duration:2e3})}))},handleResume:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=[];e&&(a=[e],this.$http.post("user/resume",{ids:a}).then((function(e){t.handleFilter(),t.$notify({title:"成功",message:e.message,type:"success",duration:2e3})})))},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([a.e("chunk-491b65a4"),a.e("chunk-748b566e")]).then(a.bind(null,"4bf8d")).then((function(e){var a=["id","昵称","类型","到期时间","上次登录","备注"],i=["id","name","type","end_time","login_time","remark"],n=t.formatJson(i);e.export_json_to_excel({header:a,data:n,filename:"list"}),t.downloadLoading=!1}))},formatJson:function(t){var e=this;return this.list.map((function(a){return t.map((function(t){return"type"===t?e.typeOptions[a[t]]:a[t]}))}))},getSortClass:function(t){var e=this.listQuery.sort;return e==="+".concat(t)?"ascending":"descending"},handleSelectionChange:function(t){this.ids=t.map((function(t){return t.id}))},sortChange:function(t){var e=t.prop,a=t.order;"id"===e&&this.sortByID(a)},cellChange:function(t){this.expand_array=[t.id]},sortByID:function(t){this.listQuery.sort="ascending"===t?"+id":"-id",this.handleFilter()}}},m=f,_=(a("bf15"),a("2877")),h=Object(_["a"])(m,i,n,!1,null,"4985ba77",null);e["default"]=h.exports},"55dd":function(t,e,a){"use strict";var i=a("5ca1"),n=a("d8e8"),s=a("4bf8"),l=a("79e5"),r=[].sort,c=[1,2,3];i(i.P+i.F*(l((function(){c.sort(void 0)}))||!l((function(){c.sort(null)}))||!a("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(s(this)):r.call(s(this),n(t))}})},"5dbc":function(t,e,a){var i=a("d3f4"),n=a("8b97").set;t.exports=function(t,e,a){var s,l=e.constructor;return l!==a&&"function"==typeof l&&(s=l.prototype)!==a.prototype&&i(s)&&n&&n(t,s),t}},6724:function(t,e,a){"use strict";a("8d41");var i="@@wavesContext";function n(t,e){function a(a){var i=Object.assign({},e.value),n=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),s=n.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var l=s.getBoundingClientRect(),r=s.querySelector(".waves-ripple");switch(r?r.className="waves-ripple":(r=document.createElement("span"),r.className="waves-ripple",r.style.height=r.style.width=Math.max(l.width,l.height)+"px",s.appendChild(r)),n.type){case"center":r.style.top=l.height/2-r.offsetHeight/2+"px",r.style.left=l.width/2-r.offsetWidth/2+"px";break;default:r.style.top=(a.pageY-l.top-r.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",r.style.left=(a.pageX-l.left-r.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return r.style.backgroundColor=n.color,r.className="waves-ripple z-active",!1}}return t[i]?t[i].removeHandle=a:t[i]={removeHandle:a},a}var s={bind:function(t,e){t.addEventListener("click",n(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[i].removeHandle,!1),t.addEventListener("click",n(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[i].removeHandle,!1),t[i]=null,delete t[i]}},l=function(t){t.directive("waves",s)};window.Vue&&(window.waves=s,Vue.use(l)),s.install=l;e["a"]=s},"8b97":function(t,e,a){var i=a("d3f4"),n=a("cb7c"),s=function(t,e){if(n(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(n){e=!0}return function(t,a){return s(t,a),e?t.__proto__=a:i(t,a),t}}({},!1):void 0),check:s}},"8d41":function(t,e,a){},aa77:function(t,e,a){var i=a("5ca1"),n=a("be13"),s=a("79e5"),l=a("fdef"),r="["+l+"]",c="​",o=RegExp("^"+r+r+"*"),u=RegExp(r+r+"*$"),p=function(t,e,a){var n={},r=s((function(){return!!l[t]()||c[t]()!=c})),o=n[t]=r?e(d):l[t];a&&(n[a]=o),i(i.P+i.F*r,"String",n)},d=p.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(o,"")),2&e&&(t=t.replace(u,"")),t};t.exports=p},bf15:function(t,e,a){"use strict";a("d1f9")},c5f6:function(t,e,a){"use strict";var i=a("7726"),n=a("69a8"),s=a("2d95"),l=a("5dbc"),r=a("6a99"),c=a("79e5"),o=a("9093").f,u=a("11e9").f,p=a("86cc").f,d=a("aa77").trim,f="Number",m=i[f],_=m,h=m.prototype,v=s(a("2aeb")(h))==f,g="trim"in String.prototype,y=function(t){var e=r(t,!1);if("string"==typeof e&&e.length>2){e=g?e.trim():d(e,3);var a,i,n,s=e.charCodeAt(0);if(43===s||45===s){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+e}for(var l,c=e.slice(2),o=0,u=c.length;o<u;o++)if(l=c.charCodeAt(o),l<48||l>n)return NaN;return parseInt(c,i)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof m&&(v?c((function(){h.valueOf.call(a)})):s(a)!=f)?l(new _(y(e)),a,m):y(e)};for(var b,x=a("9e1e")?o(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)n(_,b=x[w])&&!n(m,b)&&p(m,b,u(_,b));m.prototype=h,h.constructor=m,a("2aba")(i,f,m)}},d1f9:function(t,e,a){},f157:function(t,e,a){},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);